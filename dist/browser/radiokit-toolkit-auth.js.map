{"version":3,"sources":["webpack:///webpack/bootstrap 172bbbe779deffe0e318","webpack:///./lib/index.ts","webpack:///./lib/session/User.ts","webpack:///./lib/error/UnauthorizedError.ts","webpack:///./lib/error/BaseError.ts","webpack:///./lib/error/NetworkError.ts"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA,+CAA8C,cAAc;AAC5D;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT;AACA;;;;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,0BAA0B;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,mCAAmC;AACxE,UAAS;AACT;AACA;AACA;AACA,EAAC;AACD;;;;;;;AChGA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;;;;;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;;;;;;ACRA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD","file":"radiokit-toolkit-auth.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 172bbbe779deffe0e318","\"use strict\";\nvar User_1 = require(\"./session/User\");\nvar UnauthorizedError_1 = require(\"./error/UnauthorizedError\");\nvar NetworkError_1 = require(\"./error/NetworkError\");\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = {\n    Session: {\n        User: User_1.User,\n    },\n    Error: {\n        UnauthorizedError: UnauthorizedError_1.UnauthorizedError,\n        NetworkError: NetworkError_1.NetworkError,\n    },\n};\nif (typeof (window) !== \"undefined\") {\n    window['RadioKitToolkitAuth'] = {\n        Session: {\n            User: User_1.User,\n        },\n        Error: {\n            UnauthorizedError: UnauthorizedError_1.UnauthorizedError,\n            NetworkError: NetworkError_1.NetworkError,\n        },\n    };\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/index.ts\n// module id = 0\n// module chunks = 0","\"use strict\";\nvar UnauthorizedError_1 = require(\"../error/UnauthorizedError\");\nvar NetworkError_1 = require(\"../error/NetworkError\");\nvar User = (function () {\n    function User(accessToken, user) {\n        this.__accessToken = accessToken;\n        this.__user = user;\n    }\n    User.prototype.getAccessToken = function () {\n        return this.__accessToken;\n    };\n    User.prototype.getUser = function () {\n        return this.__user;\n    };\n    User.clearCachedCredentials = function () {\n        if (typeof (Storage) !== \"undefined\") {\n            localStorage.removeItem(\"RadioKit.Auth.accessToken\");\n            localStorage.removeItem(\"RadioKit.Auth.user\");\n        }\n    };\n    User.getCredentialsFromLocalStorage = function () {\n        if (typeof (Storage) !== \"undefined\") {\n            var accessToken = localStorage.getItem(\"RadioKit.Auth.accessToken\");\n            var user = JSON.parse(localStorage.getItem(\"RadioKit.Auth.user\"));\n            if (accessToken !== null && user !== null) {\n                var session = new User(accessToken, user);\n                return session;\n            }\n        }\n        return null;\n    };\n    User.saveCredentialsToLocalStorage = function (user) {\n        if (typeof (Storage) !== \"undefined\") {\n            localStorage.setItem(\"RadioKit.Auth.accessToken\", user.getAccessToken());\n            localStorage.setItem(\"RadioKit.Auth.user\", JSON.stringify(user.getUser()));\n        }\n    };\n    User.authenticateAsync = function (email, password, options, storeCredentials) {\n        if (storeCredentials === void 0) { storeCredentials = false; }\n        var promise = new Promise(function (resolve, reject) {\n            if (storeCredentials) {\n                var session = User.getCredentialsFromLocalStorage();\n                if (session !== null) {\n                    return resolve(session);\n                }\n            }\n            var xhr = new XMLHttpRequest();\n            var url;\n            if (options.hasOwnProperty('baseUrl')) {\n                url = options['baseUrl'] + \"/api/auth/v1.0/session/user\";\n            }\n            else {\n                url = 'https://jungle.radiokitapp.org/api/auth/v1.0/session/user';\n            }\n            xhr.open('POST', url, true);\n            xhr.setRequestHeader('Accept', 'application/json');\n            xhr.setRequestHeader('Content-Type', 'application/json');\n            xhr.timeout = 15000;\n            xhr.onerror = function (e) {\n                reject(new NetworkError_1.NetworkError(\"Network error (\" + xhr.status + \")\"));\n            };\n            xhr.onabort = function (e) {\n                reject(new NetworkError_1.NetworkError(\"Aborted\"));\n            };\n            xhr.ontimeout = function (e) {\n                reject(new NetworkError_1.NetworkError(\"Timeout\"));\n            };\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState === 4) {\n                    if (xhr.status === 201) {\n                        var responseAsJson = JSON.parse(xhr.responseText);\n                        if (responseAsJson[\"data\"]) {\n                            var session = new User(responseAsJson[\"data\"][\"access_token\"], responseAsJson[\"data\"][\"client_user\"]);\n                            if (storeCredentials) {\n                                User.saveCredentialsToLocalStorage(session);\n                            }\n                            resolve(session);\n                        }\n                        else {\n                            reject(new NetworkError_1.NetworkError(\"Invalid API response: Record not found\"));\n                        }\n                    }\n                    else if (xhr.status === 401) {\n                        reject(new UnauthorizedError_1.UnauthorizedError(\"Unauthorized\"));\n                    }\n                    else {\n                        reject(new NetworkError_1.NetworkError(\"Unexpected response (status = \" + xhr.status + \")\"));\n                    }\n                }\n            };\n            xhr.send(JSON.stringify({ email: email, password: password }));\n        });\n        return promise;\n    };\n    return User;\n}());\nexports.User = User;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/session/User.ts\n// module id = 1\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar BaseError_1 = require(\"./BaseError\");\nvar UnauthorizedError = (function (_super) {\n    __extends(UnauthorizedError, _super);\n    function UnauthorizedError(message) {\n        return _super.call(this, message) || this;\n    }\n    return UnauthorizedError;\n}(BaseError_1.BaseError));\nexports.UnauthorizedError = UnauthorizedError;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/error/UnauthorizedError.ts\n// module id = 2\n// module chunks = 0","\"use strict\";\nvar BaseError = (function () {\n    function BaseError(message) {\n        this.message = message;\n    }\n    return BaseError;\n}());\nexports.BaseError = BaseError;\nBaseError.prototype = new Error();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/error/BaseError.ts\n// module id = 3\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar BaseError_1 = require(\"./BaseError\");\nvar NetworkError = (function (_super) {\n    __extends(NetworkError, _super);\n    function NetworkError(message) {\n        return _super.call(this, message) || this;\n    }\n    return NetworkError;\n}(BaseError_1.BaseError));\nexports.NetworkError = NetworkError;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/error/NetworkError.ts\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}